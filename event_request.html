<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Request a Service - Event Nest NZ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            font-family: 'Poppins', sans-serif; 
            background-color: #f0f2f5; /* A light, clean gray */
        }
        .form-label {
            @apply block text-sm font-semibold text-slate-700 mb-2;
        }
        .form-input, .form-select {
            @apply block w-full px-4 py-3 bg-white border border-slate-300 rounded-xl shadow-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent sm:text-sm transition duration-150 text-slate-900;
        }
        .form-select {
            @apply appearance-none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2364748b' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.75rem center;
            background-repeat: no-repeat;
            background-size: 1.25em 1.25em;
        }

        /* Styling for the placeholder option in select dropdowns */
        .form-select:invalid {
            color: #64748b; /* slate-500 for placeholder text */
        }
        
        .form-select option {
            color: #1e293b; /* slate-800 for actual options */
        }

        .form-input.invalid, .form-input.error, .form-select.error {
            @apply border-red-500 ring-1 ring-red-500;
        }
        .error-message {
            @apply text-red-600 text-xs mt-1.5;
        }
        .action-button {
            @apply w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-xl shadow-sm text-base font-bold focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-200 ease-in-out;
        }
        
        /* Step Animation */
        .step {
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            will-change: transform, opacity;
        }
        .step-hidden {
            position: absolute;
            opacity: 0;
            transform: translateY(15px);
            pointer-events: none;
            visibility: hidden;
        }
        .step-visible {
            position: relative;
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
            visibility: visible;
        }
        
        /* Custom Checkbox Styling */
        .service-checkbox-label {
            @apply inline-block w-full px-4 py-3 text-center text-sm font-semibold text-slate-800 bg-white border-2 border-slate-200 rounded-xl cursor-pointer transition-all duration-200 hover:border-indigo-400 hover:shadow-md;
        }
        .service-checkbox:checked + .service-checkbox-label {
            @apply bg-indigo-50 border-indigo-500 text-indigo-900 ring-2 ring-indigo-200 shadow-lg;
        }
        .service-checkbox {
            @apply absolute opacity-0 w-0 h-0;
        }

    </style>
</head>
<body class="bg-slate-100">
    <header class="bg-indigo-700 text-white p-4 sm:p-6 shadow-lg">
        <div class="max-w-4xl mx-auto flex justify-between items-center">
            <div>
                <h1 class="text-xl sm:text-2xl font-bold">Event Service Request</h1>
                <p class="text-sm sm:text-base text-indigo-200">Find the perfect provider for your event</p>
            </div>
            <a href="index6.html" class="flex items-center space-x-2 bg-indigo-600 hover:bg-indigo-500 px-4 py-2 rounded-xl text-sm font-semibold transition-colors shadow-md">
                <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M9.293 2.293a1 1 0 011.414 0l7 7A1 1 0 0117 10.707V17.5a1.5 1.5 0 01-1.5 1.5h-3.5a1.5 1.5 0 01-1.5-1.5v-3a.5.5 0 00-.5-.5h-2a.5.5 0 00-.5.5v3A1.5 1.5 0 016 19H2.5A1.5 1.5 0 011 17.5v-6.793a1 1 0 01.293-.707l7-7z" clip-rule="evenodd" />
                </svg>
                <span class="hidden sm:inline">Home</span>
            </a>
        </div>
    </header>

    <main class="max-w-4xl mx-auto py-6 sm:py-8 px-4">
        
        <!-- Progress Bar -->
        <div class="mb-8 px-2">
            <div class="flex justify-between items-center text-sm font-semibold text-slate-600 mb-2">
                <p id="progress-text">Step 1 of 4: Event Details</p>
                <p id="progress-fraction">1/4</p>
            </div>
            <div class="w-full bg-slate-200 rounded-full h-2.5 shadow-inner">
                <div id="progress-bar-fill" class="bg-indigo-600 h-2.5 rounded-full transition-all duration-500" style="width: 25%;"></div>
            </div>
        </div>

        <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-xl">
            <form id="multi-step-form" class="relative overflow-hidden">
                
                <!-- Step 1: Event Details -->
                <div id="step-1" class="step step-visible">
                    <div class="flex items-start mb-6">
                        <span class="flex items-center justify-center w-10 h-10 rounded-xl bg-indigo-600 text-white font-bold text-xl mr-4 shadow-md">1</span>
                        <div>
                            <h2 class="text-2xl font-bold text-slate-800">Event Details</h2>
                            <p class="text-slate-500">Tell us about your event and what you're looking for.</p>
                        </div>
                    </div>
                     
                    <div class="space-y-6">
                        <div>
                            <label for="event-title" class="form-label">Event Title <span class="text-red-500">*</span></label>
                            <input type="text" name="event-title" id="event-title" class="form-input" placeholder="e.g., Sarah's 30th Birthday" required>
                        </div>
                        <div>
                            <label for="event-date" class="form-label">Event Date <span class="text-red-500">*</span></label>
                            <input type="date" name="event-date" id="event-date" class="form-input" required>
                        </div>
                        <div>
                            <label for="event-location" class="form-label">Location <span class="text-red-500">*</span></label>
                            <select id="event-location" name="event-location" class="form-select" required>
                                <option value="" disabled selected>Select an option</option>
                                <optgroup label="North Island">
                                    <option value="Auckland">Auckland</option><option value="Wellington">Wellington</option><option value="Hamilton">Hamilton</option><option value="Tauranga">Tauranga</option><option value="Lower Hutt">Lower Hutt</option><option value="Palmerston North">Palmerston North</option><option value="Napier">Napier</option><option value="Porirua">Porirua</option><option value="New Plymouth">New Plymouth</option><option value="Rotorua">Rotorua</option><option value="Whangārei">Whangārei</option><option value="Gisborne">Gisborne</option><option value="Whanganui">Whanganui</option>
                                </optgroup>
                                <optgroup label="South Island">
                                    <option value="Christchurch">Christchurch</option><option value="Dunedin">Dunedin</option><option value="Invercargill">Invercargill</option><option value="Nelson">Nelson</option><option value="Queenstown">Queenstown</option><option value="Blenheim">Blenheim</option><option value="Timaru">Timaru</option>
                                </optgroup>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Service Specifics -->
                <div id="step-2" class="step step-hidden">
                    <div class="flex items-start mb-6">
                        <span class="flex items-center justify-center w-10 h-10 rounded-xl bg-indigo-600 text-white font-bold text-xl mr-4 shadow-md">2</span>
                        <div>
                            <h2 class="text-2xl font-bold text-slate-800">Service Specifics</h2>
                            <p class="text-slate-500">Choose the specific services you need and provide more details.</p>
                        </div>
                    </div>

                    <div class="space-y-8">
                         <div>
                            <label for="service-needed" class="form-label">Service Category <span class="text-red-500">*</span></label>
                            <select id="service-needed" name="service-needed" class="form-select" required>
                                <option value="">Select an option</option>
                                <option>Audio-Visual & Technical</option><option>Catering & Food</option><option>Cultural Services</option><option>Event Staffing & Coordination</option><option>Kids Entertainment</option><option>Media, Photographers & Video</option><option>Specialist Services</option><option>Stage, Decor & Styling</option><option>Transport & Logistics</option><option>Venue & Infrastructure</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Specific Services Required <span class="text-red-500">*</span></label>
                            <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
                                <div id="specific-services-container" class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                                     <p class="text-sm text-slate-500 col-span-full">Please select a service category first.</p>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label for="quantity" class="form-label">Quantity / Number of Guests <span class="text-slate-500 font-normal">(Optional)</span></label>
                            <input type="number" name="quantity" id="quantity" class="form-input" placeholder="e.g., 50">
                        </div>
                        <div>
                            <label for="service-details" class="form-label">More Details About Your Request <span class="text-slate-500 font-normal">(Optional)</span></label>
                            <textarea id="service-details" name="service-details" rows="4" class="form-input" placeholder="Describe what you need, e.g., 'Outdoor sound system for 100 people'..."></textarea>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Logistics -->
                <div id="step-3" class="step step-hidden">
                    <div class="flex items-start mb-6">
                        <span class="flex items-center justify-center w-10 h-10 rounded-xl bg-indigo-600 text-white font-bold text-xl mr-4 shadow-md">3</span>
                        <div>
                            <h2 class="text-2xl font-bold text-slate-800">Logistics</h2>
                            <p class="text-slate-500">How and where will the service be delivered?</p>
                        </div>
                    </div>

                     <div class="space-y-6">
                        <div>
                            <label class="form-label">Service Delivery <span class="text-red-500">*</span></label>
                            <fieldset class="mt-2">
                                <div class="flex items-center gap-x-8">
                                    <div class="flex items-center">
                                        <input id="delivery-onsite" name="service-delivery" type="radio" value="onsite" checked class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500">
                                        <label for="delivery-onsite" class="ml-3 block text-sm font-medium text-slate-800">On-site Service</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input id="delivery-delivery" name="service-delivery" type="radio" value="delivery" class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500">
                                        <label for="delivery-delivery" class="ml-3 block text-sm font-medium text-slate-800">Delivery Only</label>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                        <div id="onsite-address-section">
                            <label for="onsite-address" class="form-label">On-site Service Address <span class="text-red-500">*</span></label>
                            <input type="text" name="onsite-address" id="onsite-address" class="form-input" placeholder="Enter the venue or event address" required>
                        </div>
                        <div id="delivery-address-section" class="hidden">
                            <label for="delivery-address" class="form-label">Delivery Address <span class="text-red-500">*</span></label>
                            <input type="text" name="delivery-address" id="delivery-address" class="form-input" placeholder="Enter the delivery address">
                        </div>
                    </div>
                </div>
                
                <!-- Step 4: Budget & Final Details -->
                <div id="step-4" class="step step-hidden">
                     <div class="flex items-start mb-6">
                        <span class="flex items-center justify-center w-10 h-10 rounded-xl bg-indigo-600 text-white font-bold text-xl mr-4 shadow-md">4</span>
                        <div>
                            <h2 class="text-2xl font-bold text-slate-800">Budget & Final Details</h2>
                            <p class="text-slate-500">Just a few last details to help us find the perfect match.</p>
                        </div>
                    </div>

                     <div class="space-y-6">
                        <div>
                            <label for="budget" class="form-label">Budget Range <span class="text-red-500">*</span></label>
                            <select id="budget" name="budget" class="form-select" required>
                                <option value="" disabled selected>Select an option</option>
                                <option value="under-500">$0 - $500</option><option value="500-1000">$500 - $1,000</option><option value="1000-2500">$1,000 - $2,500</option><option value="2500-5000">$2,500 - $5,000</option><option value="5000-10000">$5,000 - $10,000</option><option value="over-10000">$10,000+</option>
                            </select>
                        </div>
                        <div>
                            <label for="additional-info" class="form-label">Additional Information <span class="text-slate-500 font-normal">(Optional)</span></label>
                            <textarea id="additional-info" name="additional-info" rows="3" class="form-input" placeholder="Any other details, like allergies, accessibility needs, parking info, etc."></textarea>
                        </div>
                    </div>
                </div>

                 <!-- Navigation -->
                <div class="mt-10 pt-6 border-t border-slate-200">
                    <div class="flex justify-between items-center">
                         <button type="button" id="back-btn" class="action-button bg-slate-200 text-slate-700 hover:bg-slate-300 font-bold">Back</button>
                         <button type="button" id="next-btn" class="action-button bg-indigo-700 text-white hover:bg-indigo-800 shadow-indigo-200 hover:shadow-lg">Next Step</button>
                         <button type="submit" id="submit-btn" class="action-button bg-indigo-700 text-white hover:bg-indigo-800 shadow-indigo-200 hover:shadow-lg">Submit Request</button>
                    </div>
                </div>
            </form>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('multi-step-form');
            const steps = [...document.querySelectorAll('.step')];
            const nextBtn = document.getElementById('next-btn');
            const backBtn = document.getElementById('back-btn');
            const submitBtn = document.getElementById('submit-btn');
            
            const progressBarFill = document.getElementById('progress-bar-fill');
            const progressText = document.getElementById('progress-text');
            const progressFraction = document.getElementById('progress-fraction');

            const stepTitles = ["Event Details", "Service Specifics", "Logistics", "Budget & Final Details"];

            let currentStep = 0;

            const serviceNeededSelect = document.getElementById('service-needed');
            const specificServicesContainer = document.getElementById('specific-services-container');
            const serviceOptions = {
                "Audio-Visual & Technical": ["Sound System", "Lighting", "Projector & Screen", "Live Streaming", "Technician"],
                "Catering & Food": ["Full-Service Catering", "Food Truck", "Bar Services", "Dessert Table", "Buffet"],
                "Cultural Services": ["Kapa Haka Performance", "Whakairo (Carving)", "Tā moko (Tattooing)", "Cultural Workshops"],
                "Event Staffing & Coordination": ["Event Planner", "On-site Coordinator", "Waitstaff", "Security", "Ushers"],
                "Kids Entertainment": ["Bouncy Castle", "Face Painting", "Magician", "Balloon Twisting", "Character Appearance"],
                "Media, Photographers & Video": ["Photography", "Videography", "Photo Booth", "Drone Footage"],
                "Specialist Services": ["Fireworks", "Valet Parking", "Calligraphy", "Pet Attendant"],
                "Stage, Decor & Styling": ["Florist", "Event Stylist", "Furniture Hire", "Marquee Hire", "Backdrops"],
                "Transport & Logistics": ["Guest Shuttle", "Luxury Car Hire", "Equipment Transport"],
                "Venue & Infrastructure": ["Venue Hire", "Portable Toilets", "Generator Hire", "Heating/Cooling"]
            };

            function updateSpecificServices() {
                const selectedService = serviceNeededSelect.value;
                const options = serviceOptions[selectedService] || [];
                specificServicesContainer.innerHTML = '';
                if (options.length === 0) {
                     specificServicesContainer.innerHTML = '<p class="text-sm text-slate-500 col-span-full">Please select a service category first.</p>';
                     return;
                }
                options.forEach(option => {
                    const optionId = `service-${option.toLowerCase().replace(/\s+/g, '-')}`;
                    const div = document.createElement('div');
                    div.className = 'relative';
                    const checkbox = document.createElement('input');
                    checkbox.id = optionId;
                    checkbox.name = 'specific-services';
                    checkbox.type = 'checkbox';
                    checkbox.value = option;
                    checkbox.className = 'service-checkbox';
                    const label = document.createElement('label');
                    label.htmlFor = optionId;
                    label.className = 'service-checkbox-label';
                    label.textContent = option;
                    div.appendChild(checkbox);
                    div.appendChild(label);
                    specificServicesContainer.appendChild(div);
                });
            }
            serviceNeededSelect.addEventListener('change', updateSpecificServices);

            const onsiteRadio = document.getElementById('delivery-onsite');
            const deliveryRadio = document.getElementById('delivery-delivery');
            const onsiteAddressSection = document.getElementById('onsite-address-section');
            const deliveryAddressSection = document.getElementById('delivery-address-section');
            const onsiteAddressInput = document.getElementById('onsite-address');
            const deliveryAddressInput = document.getElementById('delivery-address');

            function toggleAddressFields() {
                if (deliveryRadio.checked) {
                    onsiteAddressSection.classList.add('hidden');
                    deliveryAddressSection.classList.remove('hidden');
                    onsiteAddressInput.removeAttribute('required');
                    deliveryAddressInput.setAttribute('required', '');
                } else {
                    onsiteAddressSection.classList.remove('hidden');
                    deliveryAddressSection.classList.add('hidden');
                    deliveryAddressInput.removeAttribute('required');
                    onsiteAddressInput.setAttribute('required', '');
                }
            }
            [onsiteRadio, deliveryRadio].forEach(el => el.addEventListener('change', toggleAddressFields));
            
            function showStep(stepIndex) {
                steps[currentStep].classList.remove('step-visible');
                steps[currentStep].classList.add('step-hidden');
                
                steps[stepIndex].classList.remove('step-hidden');
                steps[stepIndex].classList.add('step-visible');

                // Update progress bar
                const progressPercentage = ((stepIndex + 1) / steps.length) * 100;
                progressBarFill.style.width = `${progressPercentage}%`;
                progressText.textContent = `Step ${stepIndex + 1} of ${steps.length}: ${stepTitles[stepIndex]}`;
                progressFraction.textContent = `${stepIndex + 1}/${steps.length}`;
                
                const isFirstStep = stepIndex === 0;
                const isLastStep = stepIndex === steps.length - 1;

                backBtn.style.display = isFirstStep ? 'none' : 'inline-flex';
                nextBtn.style.display = isLastStep ? 'none' : 'inline-flex';
                submitBtn.style.display = isLastStep ? 'inline-flex' : 'none';
                
                currentStep = stepIndex;
            }

            function validateStep(stepIndex) {
                const currentStepElement = steps[stepIndex];
                const inputs = [...currentStepElement.querySelectorAll('input[required], select[required], textarea[required]')];
                let isValid = true;

                inputs.forEach(input => {
                    input.classList.remove('error');
                    let parent = input.parentElement;
                    const existingError = parent.querySelector('.error-message');
                    if (existingError) existingError.remove();

                    if (!input.value.trim()) {
                        isValid = false;
                        input.classList.add('error');
                        const errorMsg = document.createElement('p');
                        errorMsg.className = 'error-message';
                        errorMsg.textContent = 'This field is required.';
                        parent.appendChild(errorMsg);
                    }
                });
                
                if (stepIndex === 1) { // Validation for step 2 (service specifics)
                    const checkboxes = specificServicesContainer.querySelectorAll('input[type="checkbox"]');
                    const isCategorySelected = serviceNeededSelect.value !== '';
                    const isSpecificSelected = [...checkboxes].some(c => c.checked);
                    const serviceErrorContainer = specificServicesContainer.parentNode; 
                    
                    const existingError = serviceErrorContainer.querySelector('.error-message');
                    if (existingError) existingError.remove();
                    
                    if (isCategorySelected && !isSpecificSelected) {
                        isValid = false;
                        const errorMsg = document.createElement('p');
                        errorMsg.className = 'error-message';
                        errorMsg.textContent = 'Please select at least one specific service.';
                        serviceErrorContainer.appendChild(errorMsg);
                    }
                }
                return isValid;
            }

            nextBtn.addEventListener('click', () => {
                if (validateStep(currentStep)) {
                    showStep(currentStep + 1);
                }
            });

            backBtn.addEventListener('click', () => {
                showStep(currentStep - 1);
            });

            form.addEventListener('submit', (e) => {
                e.preventDefault();
                if (validateStep(currentStep)) {
                    alert('Your service request has been submitted successfully!');
                    form.reset();
                    showStep(0);
                    setTimeout(() => {
                         updateSpecificServices();
                         toggleAddressFields();
                    }, 300);
                }
            });
            
            const eventDateInput = document.getElementById('event-date');
            const today = new Date();
            today.setDate(today.getDate() + 1);
            eventDateInput.setAttribute('min', today.toISOString().split('T')[0]);

            // Initial setup
            showStep(0);
            toggleAddressFields();
        });
    </script>
</body>
</html>

